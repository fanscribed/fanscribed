{% extends "base.html" %}


{% block nav_class_transcribe %}
  active
{% endblock %}


{% block content %}

  {% url 'transcripts:task_assign' pk=transcript.pk as task_assign_url %}
  {% url 'transcripts:detail' pk=transcript.pk as detail_url %}

  <h1><a href="{% url 'transcripts:detail' pk=transcript.pk %}">{{ transcript.name }}</a></h1>

  <h2>Tasks</h2>

  {% if user.is_authenticated %}
    <form action="{{ task_assign_url }}" method="post">
      {% csrf_token %}
      <button class="btn btn-primary" type="submit" name="type" value="any">
        Assign Any Task
      </button>
    </form>
  {% else %}
    <a class="btn btn-primary"
       href="{% url 'account_login' %}?next={{ detail_url }}">
      Sign In
    </a>
  {% endif %}


  <div class="row">

    <div class="col-md-2">
      <h3>Transcribe</h3>
      {% include 'transcripts/_transcript_detail_task_stats.html' with tasks=transcript.transcribetask_set task_name='transcribe' %}
    </div>

    <div class="col-md-2">
      <h3>Stitch</h3>
      {% include 'transcripts/_transcript_detail_task_stats.html' with tasks=transcript.stitchtask_set task_name='stitch' %}
    </div>

    <div class="col-md-2">
      <h3>Trim</h3>
    </div>

    <div class="col-md-2">
      <h3>Boundary</h3>
    </div>

    <div class="col-md-2">
      <h3>Speaker</h3>
    </div>

  </div>

  <div class="row">

    <div class="col-md-4">
      <h3>Fragments</h3>

      <table class="table table-condensed table-bordered">
        <tr>
          <th>Total</th>
          <td>{{ transcript.fragments.count }}</td>
        </tr>
        <tr>
          <th>Empty</th>
          <td>{{ transcript.fragments.empty.count }}</td>
        </tr>
        <tr>
          <th>Transcribed</th>
          <td>{{ transcript.fragments.transcribed.count }}</td>
        </tr>
        <tr>
          <th>Transcript Reviewed</th>
          <td>{{ transcript.fragments.transcript_reviewed.count }}</td>
        </tr>
        <tr>
          <th>Stitched</th>
          <td>{{ transcript.fragments.stitched.count }}</td>
        </tr>
        <tr>
          <th>Stitch Reviewed</th>
          <td>{{ transcript.fragments.stitch_reviewed.count }}</td>
        </tr>
        <tr>
          <th>Locked</th>
          <td>{{ transcript.fragments.locked.count }}</td>
        </tr>
        <tr>
          <th>Unlocked</th>
          <td>{{ transcript.fragments.unlocked.count }}</td>
        </tr>
      </table>
    </div>

    <div class="col-md-4">
      <h3>Sentences</h3>

      <table class="table table-condensed table-bordered">
        <tr>
          <th>Total</th>
          <td>{{ transcript.sentences.count }}</td>
        </tr>
        <tr>
          <th>Empty</th>
          <td>{{ transcript.sentences.empty.count }}</td>
        </tr>
        <tr>
          <th>Partial</th>
          <td>{{ transcript.sentences.partial.count }}</td>
        </tr>
        <tr>
          <th>Full</th>
          <td>{{ transcript.sentences.full.count }}</td>
        </tr>
      </table>
    </div>

  </div>

{% endblock %}
